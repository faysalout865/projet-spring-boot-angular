<!-- VibeStore Dashboard Layout (Centered, No Sidebar) -->
<div class="min-h-screen bg-vibe-bg text-vibe-text">
  
    <!-- Top Navbar -->
    <nav class="border-b border-vibe-border bg-vibe-surface/80 backdrop-blur-md sticky top-0 z-40">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <div class="flex items-center space-x-3">
            <div class="w-8 h-8 rounded-lg bg-gradient-to-tr from-vibe-neon-blue to-vibe-neon-purple shadow-neon flex items-center justify-center">
              <i class="fas fa-cubes text-white text-sm"></i>
            </div>
            <h1 class="text-xl font-bold text-white tracking-wider">VibeStore System</h1>
          </div>
          <div class="flex items-center space-x-4">
            <div class="hidden sm:block text-right">
              <p class="text-sm font-medium text-white">Admin User</p>
              <p class="text-xs text-vibe-muted">Control Panel</p>
            </div>
            <div class="w-10 h-10 rounded-full bg-vibe-border flex items-center justify-center border border-vibe-neon-blue/30">
              <i class="fas fa-user text-vibe-neon-blue"></i>
            </div>
          </div>
        </div>
      </div>
    </nav>
  
    <!-- Main Content Container -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 space-y-8">
      
      <!-- Header Section -->
      <header class="flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0">
        <div>
          <h2 class="text-3xl font-bold text-white tracking-tight">Product Inventory</h2>
          <p class="text-vibe-muted mt-1 text-sm">Manage your catalog items, track prices, and update stock.</p>
        </div>
        <button (click)="ouvrirModal()" class="btn-primary flex items-center shadow-neon whitespace-nowrap">
          <i class="fas fa-plus mr-2"></i> Add New Product
        </button>
      </header>
  
      <!-- Stats Cards Row -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Card 1 -->
        <div class="glass-panel p-6 relative overflow-hidden group hover:border-vibe-neon-blue/50 transition-colors">
          <div class="absolute top-0 right-0 w-32 h-32 bg-vibe-neon-blue/10 blur-3xl -mr-10 -mt-10 rounded-full transition-transform group-hover:scale-110"></div>
          <div class="flex justify-between items-start relative z-10">
            <div class="space-y-1">
              <h3 class="text-vibe-muted font-medium text-sm uppercase tracking-wider">Total Products</h3>
              <p class="text-4xl font-light text-white">{{ produits.length }}</p>
            </div>
            <div class="w-10 h-10 rounded-xl bg-vibe-neon-blue/20 flex items-center justify-center text-vibe-neon-blue">
                <i class="fas fa-box-open text-lg"></i>
            </div>
          </div>
          <p class="text-xs text-emerald-400 mt-4 flex items-center relative z-10">
            <i class="fas fa-arrow-up mr-1"></i> Active in Database
          </p>
        </div>
        
        <!-- Card 2 -->
        <div class="glass-panel p-6 relative overflow-hidden group hover:border-vibe-neon-purple/50 transition-colors">
          <div class="absolute top-0 right-0 w-32 h-32 bg-vibe-neon-purple/10 blur-3xl -mr-10 -mt-10 rounded-full transition-transform group-hover:scale-110"></div>
          <div class="flex justify-between items-start relative z-10">
            <div class="space-y-1">
              <h3 class="text-vibe-muted font-medium text-sm uppercase tracking-wider">Total Inventory Value</h3>
              <p class="text-4xl font-light text-white">{{ totalValue() | currency:'USD':'symbol':'1.0-2' }}</p>
            </div>
            <div class="w-10 h-10 rounded-xl bg-vibe-neon-purple/20 flex items-center justify-center text-vibe-neon-purple">
                <i class="fas fa-dollar-sign text-lg"></i>
            </div>
          </div>
          <p class="text-xs text-emerald-400 mt-4 flex items-center relative z-10">
            <i class="fas fa-check-circle mr-1"></i> Calculated from catalog
          </p>
        </div>
  
        <!-- Card 3 -->
        <div class="glass-panel p-6 relative overflow-hidden group hover:border-emerald-500/50 transition-colors">
          <div class="absolute top-0 right-0 w-32 h-32 bg-emerald-500/10 blur-3xl -mr-10 -mt-10 rounded-full transition-transform group-hover:scale-110"></div>
          <div class="flex justify-between items-start relative z-10">
            <div class="space-y-1">
              <h3 class="text-vibe-muted font-medium text-sm uppercase tracking-wider">System Status</h3>
              <p class="text-4xl font-light text-emerald-400">Online</p>
            </div>
            <div class="w-10 h-10 rounded-xl bg-emerald-500/20 flex items-center justify-center text-emerald-400">
                <i class="fas fa-server text-lg"></i>
            </div>
          </div>
          <p class="text-xs text-vibe-muted mt-4 flex items-center relative z-10">
            <i class="fas fa-plug mr-1"></i> API Connected (Port 8080)
          </p>
        </div>
      </div>
  
      <!-- Data Table Section -->
      <div class="glass-panel overflow-hidden">
        <div class="px-6 py-5 border-b border-vibe-border flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-3 sm:space-y-0 bg-vibe-surface/30">
          <h3 class="font-semibold text-lg text-white">All Products</h3>
          <div class="flex items-center space-x-2 text-sm text-vibe-muted bg-vibe-bg px-3 py-1.5 rounded-lg border border-vibe-border">
            <i class="fas fa-search"></i>
            <span class="opacity-75">Sorted by ID</span>
          </div>
        </div>
        
        <div class="overflow-x-auto">
          <table class="w-full text-left whitespace-nowrap border-collapse">
            <thead>
              <tr class="bg-black/40 text-vibe-muted text-xs uppercase tracking-wider border-b border-vibe-border">
                <th class="px-6 py-4 font-medium w-24">ID</th>
                <th class="px-6 py-4 font-medium">Product Name</th>
                <th class="px-6 py-4 font-medium">Price</th>
                <th class="px-6 py-4 font-medium hidden sm:table-cell">Added Date</th>
                <th class="px-6 py-4 font-medium text-right">Actions</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-vibe-border text-sm">
              <tr *ngFor="let p of produits" class="hover:bg-vibe-neon-blue/5 transition-colors group cursor-default">
                <td class="px-6 py-4 font-mono text-vibe-muted">#{{ p.idProduit }}</td>
                <td class="px-6 py-4">
                  <div class="font-medium text-white flex items-center">
                    <div class="w-8 h-8 rounded bg-vibe-border flex items-center justify-center mr-3 hidden sm:flex">
                      <i class="fas fa-tag text-vibe-muted text-xs"></i>
                    </div>
                    {{ p.nomProduit }}
                  </div>
                </td>
                <td class="px-6 py-4">
                  <span class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-emerald-500/10 text-emerald-400 border border-emerald-500/20">
                    {{ p.prixProduit | currency:'USD' }}
                  </span>
                </td>
                <td class="px-6 py-4 text-vibe-muted hidden sm:table-cell">
                  <div class="flex items-center">
                    <i class="far fa-calendar-alt mr-2 opacity-50"></i>
                    {{ p.dateProduit | date:'MMM d, y' }}
                  </div>
                </td>
                <td class="px-6 py-4 text-right space-x-2">
                  <button (click)="ouvrirModal(p)" class="w-8 h-8 rounded-lg flex items-center justify-center text-vibe-neon-blue hover:bg-vibe-neon-blue/20 transition-colors" title="Edit Product">
                    <i class="fas fa-pen text-sm"></i>
                  </button>
                  <button (click)="supprimerProduit(p)" class="w-8 h-8 rounded-lg flex items-center justify-center text-red-500 hover:bg-red-500/20 transition-colors" title="Delete Product">
                    <i class="fas fa-trash text-sm"></i>
                  </button>
                </td>
              </tr>
              
              <!-- Empty State -->
              <tr *ngIf="produits.length === 0">
                <td colspan="5" class="px-6 py-20 text-center">
                  <div class="flex flex-col items-center justify-center text-vibe-muted">
                    <div class="w-16 h-16 rounded-full bg-vibe-border flex items-center justify-center mb-4">
                      <i class="fas fa-box-open text-2xl"></i>
                    </div>
                    <p class="text-lg font-medium text-white mb-1">No products found</p>
                    <p class="text-sm mb-4">Your inventory is currently empty.</p>
                    <button (click)="ouvrirModal()" class="btn-secondary text-sm">Add First Product</button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
    </main>
</div>
  
<!-- Add/Edit Product Modal (Centered Glass Panel) -->
<div *ngIf="isModalOpen" class="fixed inset-0 z-50 flex items-center justify-center px-4 bg-black/60 backdrop-blur-sm transition-opacity">
  <!-- Click outside to close (optional background layer) -->
  <div class="absolute inset-0" (click)="fermerModal()"></div>
  
  <div class="w-full max-w-lg glass-panel flex flex-col relative z-10 animate-slideUp">
      
      <!-- Modal Header -->
      <div class="px-6 py-5 border-b border-vibe-border flex justify-between items-center bg-vibe-surface/80 rounded-t-2xl">
        <div class="flex items-center space-x-3">
          <div class="w-10 h-10 rounded-lg flex items-center justify-center" [ngClass]="produitEnEdition ? 'bg-vibe-neon-purple/20 text-vibe-neon-purple' : 'bg-vibe-neon-blue/20 text-vibe-neon-blue'">
            <i class="fas" [ngClass]="produitEnEdition ? 'fa-edit' : 'fa-plus'"></i>
          </div>
          <h3 class="text-xl font-bold text-white">
              {{ produitEnEdition ? 'Edit Product' : 'Add New Product' }}
          </h3>
        </div>
        <button (click)="fermerModal()" type="button" class="w-8 h-8 flex items-center justify-center rounded-lg text-vibe-muted hover:bg-white/5 hover:text-white transition-colors">
            <i class="fas fa-times"></i>
        </button>
      </div>
  
      <!-- Modal Body (Form) -->
      <div class="px-6 py-8">
        <form (ngSubmit)="sauvegarderProduit()" class="space-y-6">
            
            <div class="space-y-2">
              <label class="block text-sm font-medium text-vibe-muted">Product Name</label>
              <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-vibe-muted">
                  <i class="fas fa-tag"></i>
                </div>
                <input type="text" [(ngModel)]="nouveauProduit.nomProduit" name="nomProduit" 
                  class="input-field shadow-inner" style="padding-left: 2.5rem;"
                  placeholder="e.g. Neon Mechanical Keyboard" required>
              </div>
            </div>
    
            <div class="space-y-2">
              <label class="block text-sm font-medium text-vibe-muted">Price</label>
              <div class="relative">
                  <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-vibe-muted">
                    <i class="fas fa-dollar-sign"></i>
                  </div>
                  <input type="number" [(ngModel)]="nouveauProduit.prixProduit" name="prixProduit" 
                    class="input-field shadow-inner" style="padding-left: 2.5rem;"
                    placeholder="0.00" step="0.01" required>
              </div>
            </div>
    
            <!-- Modal Footer (Actions) -->
            <div class="pt-6 flex justify-end space-x-3 border-t border-vibe-border mt-8">
              <button type="button" (click)="fermerModal()" class="btn-secondary" [disabled]="isSubmitting">Cancel</button>
              <button type="submit" class="btn-primary flex items-center disabled:opacity-50 disabled:cursor-not-allowed" 
                [ngClass]="{'from-vibe-neon-purple to-pink-500 shadow-[0_0_15px_rgba(176,38,255,0.4)]': produitEnEdition}"
                [disabled]="isSubmitting">
                  <i *ngIf="isSubmitting" class="fas fa-spinner fa-spin mr-2"></i>
                  <i *ngIf="!isSubmitting" class="fas mr-2" [ngClass]="produitEnEdition ? 'fa-save' : 'fa-check'"></i>
                  {{ isSubmitting ? 'Saving...' : (produitEnEdition ? 'Update Product' : 'Save Product') }}
              </button>
            </div>
    
        </form>
      </div>
  </div>
</div>
